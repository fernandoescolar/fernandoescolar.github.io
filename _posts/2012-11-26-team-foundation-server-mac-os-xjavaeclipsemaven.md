---
ID: 454
title: 'Team Foundation Server: Mac OS X+Java+Eclipse+Maven'
author: fernandoescolar
post_date: 2012-11-26 09:41:48
post_excerpt: ""
layout: post
tags: tfs devops java maven eclipse macos
---
<p>Hace unos meses, me encontraba en un cliente hablando de la posibilidad de sustituir su conjunto de aplicativos para&nbsp; ALM (Application Lifecycle Management o gestión del ciclo de vida de las aplicaciones) por el potente TFS de Microsoft. Se mostró fascinado por la herramienta: estuvimos navegando por el portal, mostrándole las gráficas y lo fácil que era gestionar todo el trabajo. No obstante, el líder tecnológico era escéptico y no confiaba en las capacidades del entorno que estábamos proponiendo. </p>
<!--break-->
<p>Así que le retamos a proponernos el escenario más complejo que podríamos encontrarnos en su empresa. Tras unos segundos de silencio, su respuesta fue concisa: macbook air, programando en Java y que use Maven.</p> <h3>Challenge accepted</h3> <p>Desempolvé el mac-mini y en lo que se instalaba el eclipse, creamos un nuevo proyecto dentro de la cuenta de Team Foundation Service de Programando en .Net.</p> <p><a href="/assets/uploads/2012/11/001.png"><img title="00" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" border="0" alt="00" src="/assets/uploads/2012/11/00_thumb1.png" width="398" height="396"></a></p> <p>Alguno puede pensar que pecamos de soberbia, utilizando un entorno más adverso incluso que el propuesto. Pero en realidad, era lo único de lo que disponíamos sin gastar demasiado tiempo y dinero. Nuestro escenario se componía de:</p> <ul> <li>Un mac-mini de una generación tan antigua que no recuerdo ni el número. Pero actualizado a un Mac OS X 10.7.3.  <li>En lugar del TFS2012, decidimos usar el TFS en azure, para no perder tiempo buscando un equipo medio potente y tener que instalarlo. Sabiendo que esta versión carece de ciertas características, y lo que es más importante, que se encuentra en la nube, por lo que no podemos hacer "trampas".  <li>Para desarrollar usamos eclipse, en la ultima versión del momento. Y el Maven que viene instalado por defecto en el sistema operativo de la manzana. </li></ul> <p>El siguiente paso fue crear el proyecto de Java para Maven, con el arquetipo de "quickstart", desde eclipse:</p> <p align="center"><a href="/assets/uploads/2012/11/011.png"><img title="01" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="01" src="/assets/uploads/2012/11/01_thumb1.png" width="375" height="326"></a>&nbsp;<a href="/assets/uploads/2012/11/021.png"><img title="02" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="02" src="/assets/uploads/2012/11/02_thumb1.png" width="379" height="324"></a></p> <p>Añadimos un pequeño "hello world" para no complicarnos demasiado el reto. Comprobamos que compilaba y se ejecutaba correctamente, y llegó el momento de añadirlo al control de código fuente de Team Foundation Service.</p> <p>Para ayudarnos ha hacerlo tuvimos que instalar un plugin para eclipse. Antiguamente era conocido como "Visual Studio Team Explorer Everywhere", pero hoy en día lo encontraremos con el nombre de "TFS Plugin for eclipse":</p> <p><a href="/assets/uploads/2012/11/031.png"><img title="03" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" border="0" alt="03" src="/assets/uploads/2012/11/03_thumb1.png" width="520" height="464"></a></p> <p>Lo mejor de este plugin es que para los que estemos acostumbrados a Visual Studio, la única dificultad que vamos a encontrar, es mostrar la ventana de "Team Explorer". Y es que eclipse viene lleno de ventanas por defecto y tendremos que hacer una pequeña búsqueda para encontrar la nuestra:</p> <p align="center"><a href="/assets/uploads/2012/11/051.png"><img title="05" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="05" src="/assets/uploads/2012/11/05_thumb1.png" width="297" height="376"></a>&nbsp; <a href="/assets/uploads/2012/11/061.png"><img title="06" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="06" src="/assets/uploads/2012/11/06_thumb1.png" width="283" height="376"></a></p> <p>Una vez la hemos activado veremos exactamente el mismo control, con todas (en realidad no todas, faltan las nuevas opciones de code review) las características que podemos encontrar en la versión, por así llamarla, original:</p> <p><a href="/assets/uploads/2012/11/041.png"><img title="04" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" border="0" alt="04" src="/assets/uploads/2012/11/04_thumb1.png" width="601" height="268"></a></p> <p>Para conectar con el proyecto que creamos al inicio del artículo, solo tuvimos que crear una nueva conexión añadiendo la dirección del TFS. En este caso, como usamos la versión de azure, introducimos la URL con "https://" por delante. Después seleccionamos el proyecto adecuado en el listado. Y ya teníamos acceso a todos los work items, las builds y control de código fuente.</p> <p align="center"><a href="/assets/uploads/2012/11/071.png"><img title="07" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="07" src="/assets/uploads/2012/11/07_thumb1.png" width="373" height="233"></a>&nbsp;<a href="/assets/uploads/2012/11/081.png"><img title="08" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="08" src="/assets/uploads/2012/11/08_thumb1.png" width="380" height="233"></a></p> <p>Para continuar, lo que teníamos que hacer era indicarle a eclipse que el código proyecto actual iba a ser gestionado por TFS. Por lo que en el explorador de paquetes, seleccionamos la raíz del proyecto y buscamos la opción de compartir con Team Foundation Server:</p> <p align="center"><a href="/assets/uploads/2012/11/091.png"><img title="09" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="09" src="/assets/uploads/2012/11/09_thumb1.png" width="323" height="320"></a>&nbsp;<a href="/assets/uploads/2012/11/101.png"><img title="10" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="10" src="/assets/uploads/2012/11/10_thumb1.png" width="400" height="318"></a></p> <p>Al realizar esta asociación, automáticamente se actualizó la información de la ventana de Team Explorer con los datos del proyecto listos para hacer check in.</p> <p><a href="/assets/uploads/2012/11/111.png"><img title="11" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" border="0" alt="11" src="/assets/uploads/2012/11/11_thumb1.png" width="246" height="413"></a></p> <p>Así que ya teníamos la mitad del camino recorrido. Habíamos conseguido conectar el entorno y subir el código fuente para que a partir de ahora fuera TFS quien lo gestionara. Pero a partir de aquí las cosas se iban a poner más difíciles, porque TFS "de fabrica" no puede crear builds de proyectos en lenguajes que no sean de la plataforma de Microsoft. Aunque si que nos facilita integrarnos con otras tecnologías.</p> <p>Para crear una build automatizada de integración continua, lo primero que tenemos que hacer es exactamente lo mismo que en cualquier sistema: instalar las herramientas. En este caso las herramientas que usamos erán la JDK y Maven. Y un detalle importante que hay que tener en cuenta, es que TFS está instalado en máquinas Windows, por lo que tuvimos que descargar las versiones para ese sistema operativo.</p> <p><a href="/assets/uploads/2012/11/121.png"><img title="12" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; float: none; padding-top: 0px; padding-left: 0px; margin-left: auto; border-left: 0px; display: block; padding-right: 0px; margin-right: auto" border="0" alt="12" src="/assets/uploads/2012/11/12_thumb1.png" width="486" height="408"></a></p> <p>El caso de Maven fue muy sencillo, porque directamente desde su página web pudimos descargar los binarios. Pero en cuanto al SDK de Java, tuvimos que pivotar en un ordenador con Windows. Ahí instalamos las herramientas y las copiamos en un pen drive, para al final tenerlas en el mac.</p> <p align="center"><a href="/assets/uploads/2012/11/131.png"><img title="13" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="13" src="/assets/uploads/2012/11/13_thumb1.png" width="521" height="297"></a>&nbsp;<a href="/assets/uploads/2012/11/141.png"><img title="14" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="14" src="/assets/uploads/2012/11/14_thumb1.png" width="238" height="295"></a></p> <p>Creamos una carpeta llamada "tools" en el directorio local, que contenía el jdk y el Maven. Y en el control de código fuente creamos la misma estructura de directorios, pero vacía, para poder sincronizarlos. Acto seguido nos dirigimos al "Team Explorer", al panel de "Pending Changes" y en acciones buscamos la opción de detectar cambios. Así conseguimos sincronizar ambas carpetas.</p> <p align="center"><a href="/assets/uploads/2012/11/151.png"><img title="15" style="border-top: 0px; border-right: 0px; background-image: none; border-bottom: 0px; padding-top: 0px; padding-left: 0px; border-left: 0px; display: inline; padding-right: 0px" border="0" alt="15" src="/assets/uploads/2012/11/15_thumb1.webp" width="509" height="372"></a></p> <p>En adición, comprobamos que cuando insertábamos código erróneo (concretamente borramos un ";") la build fallaba. Así ya podíamos estar seguros de que todo estaba correcto en nuestro entorno.</p> <h3>Conclusiones</h3> <p>Con la satisfacción de haber conseguido superar el reto en unas horas, presentamos los resultados a nuestro cliente. Y aunque aún no sabemos si ha decidido migrar o no, estamos seguros de que, al igual que nosotros, habrá aprendido mucho de esta prueba de concepto.</p> <p>Team Foundation Server, a parte de sus conocidas virtudes, se ha mostrado como una herramienta muy potente y válida para equipos mixtos: con diferentes lenguajes de programación y entornos de trabajo. Y en definitiva, seguiremos recomendándola siempre que un cliente nos pregunte por una buena herramienta que le ayude en la gestión de sus proyectos.</p>